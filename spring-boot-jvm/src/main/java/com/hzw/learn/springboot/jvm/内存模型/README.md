## 内存模型
### 主内存和工作内存
Java内存模型规定了所有的变量都存储在**主内存**中，主内存可以类比于物理硬件上的**内存**；每条线程有自己的**工作内存**，工作内存可以类比于**处理器高速缓存**，工作内存中保存当前线程使用到的变量的**主内存拷贝副本**。线程对变量的所有操作必须在工作内存中进行，不同的线程之间不能直接访问对方工作内存中的变量，线程之间变量值的传递需要通过主内存来完成。<br/>
<center>
线程、主内存、工作内存关系图<br/>

![线程、主内存、工作内存关系](https://raw.githubusercontent.com/ZhengweiHou/spring-boot-parent-hzw/master/spring-boot-jvm/src/main/resources/docs/%E7%BA%BF%E7%A8%8B%E3%80%81%E4%B8%BB%E5%86%85%E5%AD%98%E3%80%81%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AD%98%E5%85%B3%E7%B3%BB.png)

</center>
从Java内存区域来看，**主内存**主要对应Java**堆**中的数据部分；**工作内存**对应与**栈**中的部分区域。<br/>
从分配来看，主内存直接对应于物理硬件的内存，工作内存可能会被虚拟机（甚至是硬件系统优化）优先存储于寄存器和高速缓存中。

### 内存间交互
主内存和工作内存中内容拷贝和同步有以下8种操作完成：

1. lock（锁定）
	主内存中的变量标识为线程独占状态
2. unlock（解锁）
	将线程独占状态的主内存变量解除锁定
3. read（读取）
	主内存变量值传输到线程工作内存中
4. load（载入）
	将read操作传输到工作内存中的值放入工作内存的变量副本中
5. use（使用）
	使用到变量值的字节码指令执行时，将工作内存中的变量值传递给执行引擎
6. assign（赋值）
	变量赋值字节码指令执行时，讲执行引擎输出的值赋给工作内存中的变量
7. store（存储）
	工作内存中变量值传给主内存
8. write（写入）
	将store操作传输到主内存中的变量值放入到主内存的变量中
	
	
	
